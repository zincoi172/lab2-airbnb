{"ast":null,"code":"var _jsxFileName = \"/Users/daivo/Desktop/lab2-airbnb/data236-lab1-frontend/src/owner/profileEdit.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport Layout from \"../main/layout\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = axios.create({\n  baseURL: \"http://localhost:4000\",\n  withCredentials: true\n});\nfunction ProfileEdit({\n  onSaved\n}) {\n  _s();\n  const [form, setForm] = useState({\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\",\n    phone: \"\",\n    about: \"\",\n    city: \"\",\n    state: \"\",\n    country: \"United States\",\n    languages_json: \"English\",\n    gender: \"Prefer not to say\",\n    avatar_url: null\n  });\n  async function uploadToCloudinary(file) {\n    var _data$error;\n    const CLOUD_NAME = \"dewngnalj\";\n    const UPLOAD_PRESET = \"data236-lab\";\n    const fd = new FormData();\n    fd.append(\"file\", file);\n    fd.append(\"upload_preset\", UPLOAD_PRESET);\n    const res = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`, {\n      method: \"POST\",\n      body: fd\n    });\n    const data = await res.json();\n    if (!res.ok) throw new Error(((_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.message) || \"Upload failed\");\n    return data.secure_url;\n  }\n  const [avatarFile, setAvatarFile] = useState(null);\n  const [avatarUrl, setAvatarUrl] = useState(null);\n  const fileRef = useRef(null);\n  const [loading, setLoading] = useState(true);\n  const initialLetter = useMemo(() => {\n    var _form$first_name;\n    return (((_form$first_name = form.first_name) === null || _form$first_name === void 0 ? void 0 : _form$first_name[0]) || \"?\").toUpperCase();\n  }, [form.first_name]);\n  useEffect(() => {\n    (async () => {\n      try {\n        var _data$profile;\n        const {\n          data\n        } = await api.get(\"/api/profile\");\n        const p = (_data$profile = data.profile) !== null && _data$profile !== void 0 ? _data$profile : data;\n        const toLabel = g => {\n          switch ((g || \"\").toLowerCase()) {\n            case \"female\":\n              return \"Female\";\n            case \"male\":\n              return \"Male\";\n            case \"non-binary\":\n              return \"Non-binary\";\n            case \"prefer_not_to_say\":\n            default:\n              return \"Prefer not to say\";\n          }\n        };\n        setForm({\n          first_name: p.first_name || \"\",\n          last_name: p.last_name || \"\",\n          email: p.email || \"\",\n          phone: p.phone || \"\",\n          about: p.about || \"\",\n          city: p.city || \"\",\n          state: (p.state || \"\").toUpperCase().slice(0, 2),\n          country: p.country || \"United States\",\n          languages: Array.isArray(p.languages_json) && p.languages_json.length ? p.languages_json[0] : \"English\",\n          gender: toLabel(p.gender),\n          avatar_url: p.avatar_url || null\n        });\n        const resolvedAvatar = p.avatar_url ? /^https?:\\/\\//i.test(p.avatar_url) ? p.avatar_url : `${api.defaults.baseURL}${p.avatar_url}` : null;\n        setAvatarUrl(resolvedAvatar);\n      } catch (e) {\n        var _e$response;\n        if (((_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status) === 401) {\n          window.location.replace(\"/owner/dashboard\");\n          return;\n        }\n        console.error(e);\n        alert(\"Failed to load profile.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n  useEffect(() => {\n    if (!avatarFile) return;\n    const url = URL.createObjectURL(avatarFile);\n    setAvatarUrl(url);\n    return () => URL.revokeObjectURL(url);\n  }, [avatarFile]);\n  const countries = [\"United States\", \"Canada\", \"United Kingdom\", \"Australia\", \"Taiwan\", \"Japan\", \"Korea\", \"Germany\", \"France\", \"Italy\"];\n  const genders = [\"Female\", \"Male\", \"Non-binary\", \"Prefer not to say\"];\n  const languageOptions = [\"English\", \"Chinese\", \"Spanish\", \"French\", \"Japanese\", \"Korean\"];\n  function onChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    if (name === \"state\") {\n      setForm(p => ({\n        ...p,\n        state: value.toUpperCase().slice(0, 2)\n      }));\n    } else {\n      setForm(p => ({\n        ...p,\n        [name]: value\n      }));\n    }\n  }\n  function onPickAvatar(e) {\n    var _e$target$files;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (f) setAvatarFile(f);\n  }\n  function removeAvatar() {\n    setAvatarFile(null);\n    setAvatarUrl(null);\n  }\n  async function handleSubmit(e) {\n    e.preventDefault();\n    try {\n      let avatarUrl = form.avatar_url || null;\n      if (avatarFile) {\n        avatarUrl = await uploadToCloudinary(avatarFile);\n      }\n      const toEnumGender = g => {\n        switch ((g || \"\").toLowerCase()) {\n          case \"female\":\n            return \"female\";\n          case \"male\":\n            return \"male\";\n          case \"non-binary\":\n            return \"non-binary\";\n          default:\n            return \"prefer_not_to_say\";\n        }\n      };\n      const payload = {\n        first_name: form.first_name,\n        last_name: form.last_name,\n        email: form.email,\n        phone: form.phone,\n        about: form.about,\n        city: form.city,\n        state: form.state,\n        country: form.country,\n        gender: toEnumGender(form.gender),\n        languages_json: [form.languages].filter(Boolean),\n        avatar_url: avatarUrl\n      };\n      const {\n        data\n      } = await api.put(\"/api/profile\", payload, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        withCredentials: true\n      });\n      if (!(data !== null && data !== void 0 && data.ok) && !(data !== null && data !== void 0 && data.profile)) throw new Error(\"Update failed\");\n      window.location.replace(\"/owner/profile\");\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      const msg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message || \"Update failed\";\n      alert(msg);\n    }\n  }\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-4\",\n    children: \"Loading\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Layout, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"container py-4\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"h3 mb-0\",\n          children: \"Edit profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/owner/profile\",\n            className: \"btn btn-outline-secondary\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark\",\n            type: \"submit\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row g-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-4 d-flex justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"position-relative\",\n            style: {\n              width: 260,\n              height: 260\n            },\n            children: [avatarUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: avatarUrl,\n              alt: \"avatar\",\n              className: \"rounded-circle w-100 h-100\",\n              style: {\n                objectFit: \"cover\",\n                background: \"#111\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-circle bg-dark text-white d-flex align-items-center justify-content-center w-100 h-100\",\n              style: {\n                fontSize: 160,\n                fontWeight: 700\n              },\n              \"aria-label\": \"avatar placeholder\",\n              children: initialLetter\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex gap-2 position-absolute start-50 translate-middle-x\",\n              style: {\n                bottom: -14\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-light border rounded-pill shadow-sm px-3\",\n                onClick: () => {\n                  var _fileRef$current;\n                  return (_fileRef$current = fileRef.current) === null || _fileRef$current === void 0 ? void 0 : _fileRef$current.click();\n                },\n                children: \"\\uD83D\\uDCF7 Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this), avatarUrl && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-light border rounded-pill shadow-sm px-3\",\n                onClick: removeAvatar,\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: fileRef,\n              type: \"file\",\n              accept: \"image/*\",\n              hidden: true,\n              onChange: onPickAvatar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row g-3 mb-3 pb-3 border-bottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"First name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                name: \"first_name\",\n                value: form.first_name,\n                onChange: onChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Last name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                name: \"last_name\",\n                value: form.last_name,\n                onChange: onChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row g-3 mb-3 pb-3 border-bottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: \"form-control\",\n                name: \"email\",\n                value: form.email,\n                onChange: onChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Phone number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                className: \"form-control\",\n                name: \"phone\",\n                value: form.phone,\n                onChange: onChange,\n                placeholder: \"+1 123 456 7890\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3 pb-3 border-bottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"About me\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"form-control\",\n              rows: 4,\n              name: \"about\",\n              value: form.about,\n              onChange: onChange,\n              placeholder: \"Write something fun and punchy.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row g-3 mb-3 pb-3 border-bottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"City\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                name: \"city\",\n                value: form.city,\n                onChange: onChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"State (abbr.)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                name: \"state\",\n                maxLength: 2,\n                value: form.state,\n                onChange: onChange,\n                placeholder: \"CA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-text\",\n                children: \"Use 2-letter abbreviation, e.g., CA, NY\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Country\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                name: \"country\",\n                value: form.country,\n                onChange: onChange,\n                children: countries.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: c,\n                  children: c\n                }, c, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row g-3 mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Languages\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                name: \"languages\",\n                value: form.languages,\n                onChange: onChange,\n                children: languageOptions.map(l => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: l,\n                  children: l\n                }, l, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Gender\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                name: \"gender\",\n                value: form.gender,\n                onChange: onChange,\n                children: genders.map(g => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: g,\n                  children: g\n                }, g, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this);\n}\n_s(ProfileEdit, \"xqRoUbstZXi3HuFIIm5ctfwUt6I=\");\n_c = ProfileEdit;\nexport default ProfileEdit;\nvar _c;\n$RefreshReg$(_c, \"ProfileEdit\");","map":{"version":3,"names":["useEffect","useMemo","useRef","useState","axios","Layout","jsxDEV","_jsxDEV","api","create","baseURL","withCredentials","ProfileEdit","onSaved","_s","form","setForm","first_name","last_name","email","phone","about","city","state","country","languages_json","gender","avatar_url","uploadToCloudinary","file","_data$error","CLOUD_NAME","UPLOAD_PRESET","fd","FormData","append","res","fetch","method","body","data","json","ok","Error","error","message","secure_url","avatarFile","setAvatarFile","avatarUrl","setAvatarUrl","fileRef","loading","setLoading","initialLetter","_form$first_name","toUpperCase","_data$profile","get","p","profile","toLabel","g","toLowerCase","slice","languages","Array","isArray","length","resolvedAvatar","test","defaults","e","_e$response","response","status","window","location","replace","console","alert","url","URL","createObjectURL","revokeObjectURL","countries","genders","languageOptions","onChange","name","value","target","onPickAvatar","_e$target$files","f","files","removeAvatar","handleSubmit","preventDefault","toEnumGender","payload","filter","Boolean","put","headers","err","_err$response","_err$response$data","msg","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","href","type","style","width","height","src","alt","objectFit","background","fontSize","fontWeight","bottom","onClick","_fileRef$current","current","click","ref","accept","hidden","required","placeholder","rows","maxLength","map","c","l","_c","$RefreshReg$"],"sources":["/Users/daivo/Desktop/lab2-airbnb/data236-lab1-frontend/src/owner/profileEdit.jsx"],"sourcesContent":["import { useEffect, useMemo, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport Layout from \"../main/layout\";\n\nconst api = axios.create({\n  baseURL: \"http://localhost:4000\",\n  withCredentials: true, \n});\n\nfunction ProfileEdit({ onSaved }) {\n  const [form, setForm] = useState({\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\",\n    phone: \"\",\n    about: \"\",\n    city: \"\",\n    state: \"\",\n    country: \"United States\",\n    languages_json: \"English\",           \n    gender: \"Prefer not to say\",\n    avatar_url: null,\n  });\n\n  async function uploadToCloudinary(file) {\n    const CLOUD_NAME = \"dewngnalj\"; \n    const UPLOAD_PRESET = \"data236-lab\"; \n\n    const fd = new FormData();\n    fd.append(\"file\", file);\n    fd.append(\"upload_preset\", UPLOAD_PRESET);\n\n    const res = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`, {\n      method: \"POST\",\n      body: fd,\n    });\n\n    const data = await res.json();\n    if (!res.ok) throw new Error(data.error?.message || \"Upload failed\");\n\n    return data.secure_url; \n  }\n\n  const [avatarFile, setAvatarFile] = useState(null);\n  const [avatarUrl, setAvatarUrl] = useState(null);\n  const fileRef = useRef(null);\n\n  const [loading, setLoading] = useState(true);\n\n  const initialLetter = useMemo(\n    () => (form.first_name?.[0] || \"?\").toUpperCase(),\n    [form.first_name]\n  );\n\n    useEffect(() => {\n        (async () => {\n          try {\n            const { data } = await api.get(\"/api/profile\");\n            const p = data.profile ?? data; \n            \n            const toLabel = (g) => {\n              switch ((g || \"\").toLowerCase()) {\n                case \"female\": return \"Female\";\n                case \"male\": return \"Male\";\n                case \"non-binary\": return \"Non-binary\";\n                case \"prefer_not_to_say\":\n                default: return \"Prefer not to say\";\n              }\n            };\n\n            setForm({\n              first_name: p.first_name || \"\",\n              last_name: p.last_name || \"\",\n              email: p.email || \"\",\n              phone: p.phone || \"\",\n              about: p.about || \"\",\n              city: p.city || \"\",\n              state: (p.state || \"\").toUpperCase().slice(0, 2),\n              country: p.country || \"United States\",\n              languages: Array.isArray(p.languages_json) && p.languages_json.length ? p.languages_json[0] : \"English\",\n              gender: toLabel(p.gender),\n              avatar_url: p.avatar_url || null, \n            });\n            \n            const resolvedAvatar = p.avatar_url ? (/^https?:\\/\\//i.test(p.avatar_url) ? p.avatar_url : `${api.defaults.baseURL}${p.avatar_url}`) : null;\n            setAvatarUrl(resolvedAvatar);\n          } catch (e) {\n            if (e.response?.status === 401) {\n              window.location.replace(\"/owner/dashboard\");\n              return;\n            }\n            console.error(e);\n            alert(\"Failed to load profile.\");\n          } finally {\n            setLoading(false);\n          }\n        })();\n      }, []);\n\n  useEffect(() => {\n    if (!avatarFile) return;\n    const url = URL.createObjectURL(avatarFile);\n    setAvatarUrl(url);\n    return () => URL.revokeObjectURL(url);\n  }, [avatarFile]);\n\n  const countries = [\n    \"United States\",\n    \"Canada\",\n    \"United Kingdom\",\n    \"Australia\",\n    \"Taiwan\",\n    \"Japan\",\n    \"Korea\",\n    \"Germany\",\n    \"France\",\n    \"Italy\",\n  ];\n  const genders = [\"Female\", \"Male\", \"Non-binary\", \"Prefer not to say\"];\n  const languageOptions = [\"English\", \"Chinese\", \"Spanish\", \"French\", \"Japanese\", \"Korean\"];\n\n  function onChange(e) {\n    const { name, value } = e.target;\n    if (name === \"state\") {\n      setForm((p) => ({ ...p, state: value.toUpperCase().slice(0, 2) }));\n    } else {\n      setForm((p) => ({ ...p, [name]: value }));\n    }\n  }\n  function onPickAvatar(e) {\n    const f = e.target.files?.[0];\n    if (f) setAvatarFile(f);\n  }\n  function removeAvatar() {\n    setAvatarFile(null);\n    setAvatarUrl(null);\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    try {\n      let avatarUrl = form.avatar_url || null;\n\n      if (avatarFile) {\n        avatarUrl = await uploadToCloudinary(avatarFile);\n      }\n\n      const toEnumGender = (g) => {\n        switch ((g || \"\").toLowerCase()) {\n          case \"female\": return \"female\";\n          case \"male\": return \"male\";\n          case \"non-binary\": return \"non-binary\";\n          default: return \"prefer_not_to_say\";\n        }\n      };\n\n      const payload = {\n        first_name: form.first_name,\n        last_name: form.last_name,\n        email: form.email,\n        phone: form.phone,\n        about: form.about,\n        city: form.city,\n        state: form.state,\n        country: form.country,\n        gender: toEnumGender(form.gender),\n        languages_json: [form.languages].filter(Boolean),\n        avatar_url: avatarUrl, \n      };\n\n      const { data } = await api.put(\"/api/profile\", payload, {\n        headers: { \"Content-Type\": \"application/json\" },\n        withCredentials: true,\n      });\n\n      if (!data?.ok && !data?.profile) throw new Error(\"Update failed\");\n      window.location.replace(\"/owner/profile\");\n    } catch (err) {\n      console.error(err);\n      const msg = err.response?.data?.message || err.message || \"Update failed\";\n      alert(msg);\n    }\n  }\n\n\n\n  if (loading) return <div className=\"container py-4\">Loadingâ€¦</div>;\n\n  return (\n    <div>\n      <Layout />\n      <form className=\"container py-4\" onSubmit={handleSubmit}>\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\n          <h1 className=\"h3 mb-0\">Edit profile</h1>\n          <div className=\"d-flex gap-2\">\n            <a href=\"/owner/profile\" className=\"btn btn-outline-secondary\">\n              Cancel\n            </a>\n            <button className=\"btn btn-dark\" type=\"submit\">\n              Save\n            </button>\n          </div>\n        </div>\n\n        <div className=\"row g-4\">\n          <div className=\"col-12 col-lg-4 d-flex justify-content-center\">\n            <div className=\"position-relative\" style={{ width: 260, height: 260 }}>\n              {avatarUrl ? (\n                <img\n                  src={avatarUrl}\n                  alt=\"avatar\"\n                  className=\"rounded-circle w-100 h-100\"\n                  style={{ objectFit: \"cover\", background: \"#111\" }}\n                />\n              ) : (\n                <div\n                  className=\"rounded-circle bg-dark text-white d-flex align-items-center justify-content-center w-100 h-100\"\n                  style={{ fontSize: 160, fontWeight: 700 }}\n                  aria-label=\"avatar placeholder\"\n                >\n                  {initialLetter}\n                </div>\n              )}\n\n              <div\n                className=\"d-flex gap-2 position-absolute start-50 translate-middle-x\"\n                style={{ bottom: -14 }}\n              >\n                <button\n                  type=\"button\"\n                  className=\"btn btn-light border rounded-pill shadow-sm px-3\"\n                  onClick={() => fileRef.current?.click()}\n                >\n                  ðŸ“· Add\n                </button>\n                {avatarUrl && (\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-light border rounded-pill shadow-sm px-3\"\n                    onClick={removeAvatar}\n                  >\n                    Remove\n                  </button>\n                )}\n              </div>\n              <input ref={fileRef} type=\"file\" accept=\"image/*\" hidden onChange={onPickAvatar} />\n            </div>\n          </div>\n\n          <div className=\"col-12 col-lg-8\">\n            <div className=\"row g-3 mb-3 pb-3 border-bottom\">\n              <div className=\"col-md-6\">\n                <label className=\"form-label\">First name</label>\n                <input\n                  className=\"form-control\"\n                  name=\"first_name\"\n                  value={form.first_name}\n                  onChange={onChange}\n                  required\n                />\n              </div>\n              <div className=\"col-md-6\">\n                <label className=\"form-label\">Last name</label>\n                <input\n                  className=\"form-control\"\n                  name=\"last_name\"\n                  value={form.last_name}\n                  onChange={onChange}\n                />\n              </div>\n            </div>\n\n            <div className=\"row g-3 mb-3 pb-3 border-bottom\">\n              <div className=\"col-md-6\">\n                <label className=\"form-label\">Email</label>\n                <input\n                  type=\"email\"\n                  className=\"form-control\"\n                  name=\"email\"\n                  value={form.email}\n                  onChange={onChange}\n                  required\n                />\n              </div>\n              <div className=\"col-md-6\">\n                <label className=\"form-label\">Phone number</label>\n                <input\n                  type=\"tel\"\n                  className=\"form-control\"\n                  name=\"phone\"\n                  value={form.phone}\n                  onChange={onChange}\n                  placeholder=\"+1 123 456 7890\"\n                />\n              </div>\n            </div>\n\n            <div className=\"mb-3 pb-3 border-bottom\">\n              <label className=\"form-label\">About me</label>\n              <textarea\n                className=\"form-control\"\n                rows={4}\n                name=\"about\"\n                value={form.about}\n                onChange={onChange}\n                placeholder=\"Write something fun and punchy.\"\n              />\n            </div>\n\n            <div className=\"row g-3 mb-3 pb-3 border-bottom\">\n              <div className=\"col-md-4\">\n                <label className=\"form-label\">City</label>\n                <input className=\"form-control\" name=\"city\" value={form.city} onChange={onChange} />\n              </div>\n              <div className=\"col-md-4\">\n                <label className=\"form-label\">State (abbr.)</label>\n                <input\n                  className=\"form-control\"\n                  name=\"state\"\n                  maxLength={2}\n                  value={form.state}\n                  onChange={onChange}\n                  placeholder=\"CA\"\n                />\n                <div className=\"form-text\">Use 2-letter abbreviation, e.g., CA, NY</div>\n              </div>\n              <div className=\"col-md-4\">\n                <label className=\"form-label\">Country</label>\n                <select className=\"form-select\" name=\"country\" value={form.country} onChange={onChange}>\n                  {countries.map((c) => (\n                    <option key={c} value={c}>\n                      {c}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"row g-3 mb-4\">\n              <div className=\"col-md-6\">\n                <label className=\"form-label\">Languages</label>\n                <select className=\"form-select\" name=\"languages\" value={form.languages} onChange={onChange}>\n                  {languageOptions.map((l) => (\n                    <option key={l} value={l}>\n                      {l}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div className=\"col-md-6\">\n                <label className=\"form-label\">Gender</label>\n                <select className=\"form-select\" name=\"gender\" value={form.gender} onChange={onChange}>\n                  {genders.map((g) => (\n                    <option key={g} value={g}>\n                      {g}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default ProfileEdit;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}