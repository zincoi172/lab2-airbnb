{"ast":null,"code":"var _jsxFileName = \"/Users/daivo/Desktop/lab2-airbnb/data236-lab1-frontend/src/owner/propertiesEdit.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Layout from \"../main/layout\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction PropertyForm() {\n  _s();\n  var _form$photo_urls;\n  const nav = useNavigate();\n  const {\n    id\n  } = useParams();\n  const editing = !!id;\n  const [form, setForm] = useState({\n    title: \"\",\n    type: \"Entire Home\",\n    price_per_night: 0,\n    bedrooms: 0,\n    bathrooms: 0,\n    description: \"\",\n    amenities: [],\n    location: {\n      city: \"\",\n      state: \"\",\n      country: \"United States\"\n    },\n    photo_urls: [] // keep existing photos here (array of {url,key} or string url)\n  });\n  const [files, setFiles] = useState([]); // new files to upload\n  const [previews, setPreviews] = useState([]); // previews for newly picked files\n\n  // --- helpers ---\n  function parseLocation(loc) {\n    if (!loc) return {\n      city: \"\",\n      state: \"\",\n      country: \"United States\"\n    };\n    if (typeof loc === \"object\") return {\n      city: loc.city || \"\",\n      state: (loc.state || \"\").toUpperCase().slice(0, 2),\n      country: loc.country || \"United States\"\n    };\n    try {\n      const o = JSON.parse(loc);\n      return {\n        city: o.city || \"\",\n        state: (o.state || \"\").toUpperCase().slice(0, 2),\n        country: o.country || \"United States\"\n      };\n    } catch {\n      return {\n        city: \"\",\n        state: \"\",\n        country: \"United States\"\n      };\n    }\n  }\n  function normalizePhotos(arr) {\n    if (!Array.isArray(arr)) return [];\n    // allow both [\"url\", ...] or [{url,key}, ...]\n    return arr.map(p => {\n      var _p$key;\n      return typeof p === \"string\" ? {\n        url: p,\n        key: null\n      } : {\n        url: p.url,\n        key: (_p$key = p.key) !== null && _p$key !== void 0 ? _p$key : null\n      };\n    });\n  }\n  async function uploadToCloudinary(files) {\n    const CLOUD_NAME = \"dewngnalj\";\n    const UPLOAD_PRESET = \"data236-lab\";\n    const out = [];\n    for (const file of files) {\n      var _data$error;\n      const fd = new FormData();\n      fd.append(\"file\", file);\n      fd.append(\"upload_preset\", UPLOAD_PRESET);\n      const r = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`, {\n        method: \"POST\",\n        body: fd\n      });\n      const data = await r.json();\n      if (!r.ok) throw new Error(((_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.message) || \"upload failed\");\n      out.push({\n        url: data.secure_url,\n        key: data.public_id\n      });\n    }\n    return out;\n  }\n\n  // --- load when editing ---\n  useEffect(() => {\n    if (!editing) return;\n    (async (_data$bedrooms, _data$bathrooms) => {\n      const {\n        data\n      } = await axios.get(`http://localhost:4000/api/owner/properties/${id}`, {\n        withCredentials: true\n      });\n      if (!data) return;\n      setForm({\n        title: data.title || \"\",\n        type: data.type || \"Entire Home\",\n        price_per_night: data.price_per_night != null ? Number(data.price_per_night) : 0,\n        bedrooms: (_data$bedrooms = data.bedrooms) !== null && _data$bedrooms !== void 0 ? _data$bedrooms : 0,\n        bathrooms: (_data$bathrooms = data.bathrooms) !== null && _data$bathrooms !== void 0 ? _data$bathrooms : 0,\n        description: data.description || \"\",\n        amenities: Array.isArray(data.amenities) ? data.amenities : [],\n        location: parseLocation(data.location),\n        photo_urls: normalizePhotos(data.photo_urls)\n      });\n    })();\n  }, [editing, id]);\n\n  // --- handlers ---\n  function onChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm(f => ({\n      ...f,\n      [name]: value\n    }));\n  }\n  function onPickFiles(e) {\n    const selected = Array.from(e.target.files || []);\n    setFiles(selected);\n    // revoke old previews to avoid memory leak\n    previews.forEach(url => URL.revokeObjectURL(url));\n    const urls = selected.map(file => URL.createObjectURL(file));\n    setPreviews(urls);\n  }\n  async function onSubmit(e) {\n    e.preventDefault();\n    try {\n      // 1) upload newly picked files (if any)\n      const newlyUploaded = files.length ? await uploadToCloudinary(files) : [];\n\n      // 2) merge existing + new photos into final array of {url,key}\n      const existing = normalizePhotos(form.photo_urls);\n      const photo_urls = [...existing, ...newlyUploaded];\n\n      // 3) build payload with backend field names\n      const payload = {\n        title: form.title,\n        type: form.type,\n        price_per_night: Number(form.price_per_night),\n        bedrooms: Number(form.bedrooms),\n        bathrooms: Number(form.bathrooms),\n        description: form.description,\n        amenities: form.amenities,\n        location: JSON.stringify(form.location),\n        // backend stores string\n        photo_urls // array of {url,key}\n        // guests not shown in form; backend has default 1\n      };\n      if (editing) {\n        await axios.put(`http://localhost:4000/api/owner/properties/${id}`, payload, {\n          withCredentials: true,\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n      } else {\n        await axios.post(\"http://localhost:4000/api/owner/properties\", payload, {\n          withCredentials: true,\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n      }\n      nav(\"/owner/dashboard\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to save property. Please try again.\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white min-vh-100\",\n    children: [/*#__PURE__*/_jsxDEV(Layout, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container py-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-0\",\n          children: editing ? \"Edit property\" : \"New property\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"btn btn-outline-secondary\",\n            href: \"/owner/profile#properties\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-dark\",\n            onClick: onSubmit,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row g-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Property name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-3\",\n            name: \"title\",\n            value: form.title,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"form-control mb-3\",\n            rows: 5,\n            name: \"description\",\n            value: form.description,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this), ((_form$photo_urls = form.photo_urls) === null || _form$photo_urls === void 0 ? void 0 : _form$photo_urls.length) > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-label\",\n              children: \"Existing photos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex flex-wrap gap-2 mb-3\",\n              children: form.photo_urls.map((p, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"position-relative\",\n                style: {\n                  width: 120,\n                  height: 120,\n                  borderRadius: 8,\n                  overflow: \"hidden\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: typeof p === \"string\" ? p : p.url,\n                  alt: `existing-${i}`,\n                  className: \"w-100 h-100\",\n                  style: {\n                    objectFit: \"cover\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-sm btn-danger position-absolute top-0 end-0\",\n                  style: {\n                    transform: \"translate(25%, -25%)\",\n                    borderRadius: \"50%\",\n                    lineHeight: \"1\",\n                    padding: \"2px 6px\"\n                  },\n                  onClick: () => setForm(f => ({\n                    ...f,\n                    photo_urls: f.photo_urls.filter((_, idx) => idx !== i)\n                  })),\n                  \"aria-label\": \"Remove existing photo\",\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 23\n                }, this)]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Add photos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"file\",\n            multiple: true,\n            onChange: onPickFiles\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), previews.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-wrap gap-2 mt-3\",\n            children: previews.map((src, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"position-relative\",\n              style: {\n                width: 120,\n                height: 120\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: src,\n                alt: `preview-${i}`,\n                className: \"rounded shadow-sm\",\n                style: {\n                  width: \"100%\",\n                  height: \"100%\",\n                  objectFit: \"cover\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-sm btn-danger position-absolute top-0 end-0\",\n                style: {\n                  transform: \"translate(25%, -25%)\"\n                },\n                onClick: () => {\n                  setFiles(f => f.filter((_, idx) => idx !== i));\n                  setPreviews(p => p.filter((_, idx) => idx !== i));\n                },\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 21\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-select mb-3\",\n            name: \"type\",\n            value: form.type,\n            onChange: onChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Entire Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Private Room\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Shared Room\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Price (per night)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-3\",\n            type: \"number\",\n            name: \"price_per_night\",\n            value: form.price_per_night,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Bedrooms\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mb-3\",\n                type: \"number\",\n                name: \"bedrooms\",\n                value: form.bedrooms,\n                onChange: onChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Bathrooms\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mb-3\",\n                type: \"number\",\n                name: \"bathrooms\",\n                value: form.bathrooms,\n                onChange: onChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Amenities (comma separated)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"form-control mb-3\",\n            rows: 3,\n            value: form.amenities.join(\", \"),\n            placeholder: \"Kitchen, Wifi\",\n            onChange: e => setForm(f => ({\n              ...f,\n              amenities: e.target.value.split(\",\").map(s => s.trim()).filter(Boolean)\n            }))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mb-2\",\n                placeholder: \"City\",\n                value: form.location.city,\n                onChange: e => setForm(f => ({\n                  ...f,\n                  location: {\n                    ...f.location,\n                    city: e.target.value\n                  }\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mb-2\",\n                placeholder: \"State (abbr.)\",\n                value: form.location.state,\n                onChange: e => setForm(f => ({\n                  ...f,\n                  location: {\n                    ...f.location,\n                    state: e.target.value.toUpperCase().slice(0, 2)\n                  }\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-select\",\n            value: form.location.country,\n            onChange: e => setForm(f => ({\n              ...f,\n              location: {\n                ...f.location,\n                country: e.target.value\n              }\n            })),\n            children: [\"United States\", \"Canada\", \"United Kingdom\", \"Australia\", \"Taiwan\", \"Japan\"].map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n              children: c\n            }, c, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n_s(PropertyForm, \"w1Y1QtPq1BCjptLC4xbgfXo6aoI=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = PropertyForm;\nexport default PropertyForm;\nvar _c;\n$RefreshReg$(_c, \"PropertyForm\");","map":{"version":3,"names":["useEffect","useState","axios","Layout","useNavigate","useParams","jsxDEV","_jsxDEV","Fragment","_Fragment","PropertyForm","_s","_form$photo_urls","nav","id","editing","form","setForm","title","type","price_per_night","bedrooms","bathrooms","description","amenities","location","city","state","country","photo_urls","files","setFiles","previews","setPreviews","parseLocation","loc","toUpperCase","slice","o","JSON","parse","normalizePhotos","arr","Array","isArray","map","p","_p$key","url","key","uploadToCloudinary","CLOUD_NAME","UPLOAD_PRESET","out","file","_data$error","fd","FormData","append","r","fetch","method","body","data","json","ok","Error","error","message","push","secure_url","public_id","_data$bedrooms","_data$bathrooms","get","withCredentials","Number","onChange","e","name","value","target","f","onPickFiles","selected","from","forEach","URL","revokeObjectURL","urls","createObjectURL","onSubmit","preventDefault","newlyUploaded","length","existing","payload","stringify","put","headers","post","err","console","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","href","onClick","rows","i","style","width","height","borderRadius","overflow","src","alt","objectFit","transform","lineHeight","padding","filter","_","idx","multiple","join","placeholder","split","s","trim","Boolean","c","_c","$RefreshReg$"],"sources":["/Users/daivo/Desktop/lab2-airbnb/data236-lab1-frontend/src/owner/propertiesEdit.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Layout from \"../main/layout\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nfunction PropertyForm() {\n  const nav = useNavigate();\n  const { id } = useParams();\n  const editing = !!id;\n\n  const [form, setForm] = useState({\n    title: \"\",\n    type: \"Entire Home\",\n    price_per_night: 0,\n    bedrooms: 0,\n    bathrooms: 0,\n    description: \"\",\n    amenities: [],\n    location: { city: \"\", state: \"\", country: \"United States\" },\n    photo_urls: [], // keep existing photos here (array of {url,key} or string url)\n  });\n\n  const [files, setFiles] = useState([]);     // new files to upload\n  const [previews, setPreviews] = useState([]); // previews for newly picked files\n\n  // --- helpers ---\n  function parseLocation(loc) {\n    if (!loc) return { city: \"\", state: \"\", country: \"United States\" };\n    if (typeof loc === \"object\") return { city: loc.city || \"\", state: (loc.state || \"\").toUpperCase().slice(0,2), country: loc.country || \"United States\" };\n    try {\n      const o = JSON.parse(loc);\n      return {\n        city: o.city || \"\",\n        state: (o.state || \"\").toUpperCase().slice(0, 2),\n        country: o.country || \"United States\",\n      };\n    } catch {\n      return { city: \"\", state: \"\", country: \"United States\" };\n    }\n  }\n\n  function normalizePhotos(arr) {\n    if (!Array.isArray(arr)) return [];\n    // allow both [\"url\", ...] or [{url,key}, ...]\n    return arr.map((p) =>\n      typeof p === \"string\" ? { url: p, key: null } : { url: p.url, key: p.key ?? null }\n    );\n  }\n\n  async function uploadToCloudinary(files) {\n    const CLOUD_NAME = \"dewngnalj\";\n    const UPLOAD_PRESET = \"data236-lab\";\n    const out = [];\n    for (const file of files) {\n      const fd = new FormData();\n      fd.append(\"file\", file);\n      fd.append(\"upload_preset\", UPLOAD_PRESET);\n      const r = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`, {\n        method: \"POST\",\n        body: fd,\n      });\n      const data = await r.json();\n      if (!r.ok) throw new Error(data.error?.message || \"upload failed\");\n      out.push({ url: data.secure_url, key: data.public_id });\n    }\n    return out;\n  }\n\n  // --- load when editing ---\n  useEffect(() => {\n    if (!editing) return;\n    (async () => {\n      const { data } = await axios.get(\n        `http://localhost:4000/api/owner/properties/${id}`,\n        { withCredentials: true }\n      );\n      if (!data) return;\n      setForm({\n        title: data.title || \"\",\n        type: data.type || \"Entire Home\",\n        price_per_night: data.price_per_night != null ? Number(data.price_per_night) : 0,\n        bedrooms: data.bedrooms ?? 0,\n        bathrooms: data.bathrooms ?? 0,\n        description: data.description || \"\",\n        amenities: Array.isArray(data.amenities) ? data.amenities : [],\n        location: parseLocation(data.location),\n        photo_urls: normalizePhotos(data.photo_urls),\n      });\n    })();\n  }, [editing, id]);\n\n  // --- handlers ---\n  function onChange(e) {\n    const { name, value } = e.target;\n    setForm((f) => ({ ...f, [name]: value }));\n  }\n\n  function onPickFiles(e) {\n    const selected = Array.from(e.target.files || []);\n    setFiles(selected);\n    // revoke old previews to avoid memory leak\n    previews.forEach((url) => URL.revokeObjectURL(url));\n    const urls = selected.map((file) => URL.createObjectURL(file));\n    setPreviews(urls);\n  }\n\n  async function onSubmit(e) {\n    e.preventDefault();\n\n    try {\n      // 1) upload newly picked files (if any)\n      const newlyUploaded = files.length ? await uploadToCloudinary(files) : [];\n\n      // 2) merge existing + new photos into final array of {url,key}\n      const existing = normalizePhotos(form.photo_urls);\n      const photo_urls = [...existing, ...newlyUploaded];\n\n      // 3) build payload with backend field names\n      const payload = {\n        title: form.title,\n        type: form.type,\n        price_per_night: Number(form.price_per_night),\n        bedrooms: Number(form.bedrooms),\n        bathrooms: Number(form.bathrooms),\n        description: form.description,\n        amenities: form.amenities,\n        location: JSON.stringify(form.location), // backend stores string\n        photo_urls, // array of {url,key}\n        // guests not shown in form; backend has default 1\n      };\n\n      if (editing) {\n        await axios.put(\n          `http://localhost:4000/api/owner/properties/${id}`,\n          payload,\n          { withCredentials: true, headers: { \"Content-Type\": \"application/json\" } }\n        );\n      } else {\n        await axios.post(\n          \"http://localhost:4000/api/owner/properties\",\n          payload,\n          { withCredentials: true, headers: { \"Content-Type\": \"application/json\" } }\n        );\n      }\n\n      nav(\"/owner/dashboard\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to save property. Please try again.\");\n    }\n  }\n\n  return (\n    <div className=\"bg-white min-vh-100\">\n      <Layout />\n      <main className=\"container py-4\">\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\n          <h2 className=\"mb-0\">{editing ? \"Edit property\" : \"New property\"}</h2>\n          <div className=\"d-flex gap-2\">\n            <a className=\"btn btn-outline-secondary\" href=\"/owner/profile#properties\">\n              Cancel\n            </a>\n            <button className=\"btn btn-dark\" onClick={onSubmit}>\n              Save\n            </button>\n          </div>\n        </div>\n\n        <div className=\"row g-3\">\n          <div className=\"col-md-8\">\n            {/* title (backend) */}\n            <label className=\"form-label\">Property name</label>\n            <input\n              className=\"form-control mb-3\"\n              name=\"title\"\n              value={form.title}\n              onChange={onChange}\n            />\n\n            <label className=\"form-label\">Description</label>\n            <textarea\n              className=\"form-control mb-3\"\n              rows={5}\n              name=\"description\"\n              value={form.description}\n              onChange={onChange}\n            />\n\n            {/* existing photos (read-only thumbnails) */}\n            {form.photo_urls?.length > 0 && (\n              <>\n                <div className=\"form-label\">Existing photos</div>\n                <div className=\"d-flex flex-wrap gap-2 mb-3\">\n                  {form.photo_urls.map((p, i) => (\n                    <div\n                      key={i}\n                      className=\"position-relative\"\n                      style={{\n                        width: 120,\n                        height: 120,\n                        borderRadius: 8,\n                        overflow: \"hidden\",\n                      }}\n                    >\n                      <img\n                        src={typeof p === \"string\" ? p : p.url}\n                        alt={`existing-${i}`}\n                        className=\"w-100 h-100\"\n                        style={{ objectFit: \"cover\" }}\n                      />\n                      <button\n                        type=\"button\"\n                        className=\"btn btn-sm btn-danger position-absolute top-0 end-0\"\n                        style={{\n                          transform: \"translate(25%, -25%)\",\n                          borderRadius: \"50%\",\n                          lineHeight: \"1\",\n                          padding: \"2px 6px\",\n                        }}\n                        onClick={() =>\n                          setForm((f) => ({\n                            ...f,\n                            photo_urls: f.photo_urls.filter((_, idx) => idx !== i),\n                          }))\n                        }\n                        aria-label=\"Remove existing photo\"\n                      >\n                        ×\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              </>\n            )}\n\n\n            {/* pick new photos */}\n            <label className=\"form-label\">Add photos</label>\n            <input className=\"form-control\" type=\"file\" multiple onChange={onPickFiles} />\n            {previews.length > 0 && (\n              <div className=\"d-flex flex-wrap gap-2 mt-3\">\n                {previews.map((src, i) => (\n                  <div key={i} className=\"position-relative\" style={{ width: 120, height: 120 }}>\n                    <img\n                      src={src}\n                      alt={`preview-${i}`}\n                      className=\"rounded shadow-sm\"\n                      style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\n                    />\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-sm btn-danger position-absolute top-0 end-0\"\n                      style={{ transform: \"translate(25%, -25%)\" }}\n                      onClick={() => {\n                        setFiles((f) => f.filter((_, idx) => idx !== i));\n                        setPreviews((p) => p.filter((_, idx) => idx !== i));\n                      }}\n                    >\n                      ×\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          <div className=\"col-md-4\">\n            <label className=\"form-label\">Type</label>\n            <select className=\"form-select mb-3\" name=\"type\" value={form.type} onChange={onChange}>\n              <option>Entire Home</option>\n              <option>Private Room</option>\n              <option>Shared Room</option>\n            </select>\n\n            {/* price_per_night (backend) */}\n            <label className=\"form-label\">Price (per night)</label>\n            <input\n              className=\"form-control mb-3\"\n              type=\"number\"\n              name=\"price_per_night\"\n              value={form.price_per_night}\n              onChange={onChange}\n            />\n\n            <div className=\"row\">\n              <div className=\"col\">\n                <label className=\"form-label\">Bedrooms</label>\n                <input\n                  className=\"form-control mb-3\"\n                  type=\"number\"\n                  name=\"bedrooms\"\n                  value={form.bedrooms}\n                  onChange={onChange}\n                />\n              </div>\n              <div className=\"col\">\n                <label className=\"form-label\">Bathrooms</label>\n                <input\n                  className=\"form-control mb-3\"\n                  type=\"number\"\n                  name=\"bathrooms\"\n                  value={form.bathrooms}\n                  onChange={onChange}\n                />\n              </div>\n            </div>\n\n            <label className=\"form-label\">Amenities (comma separated)</label>\n            <textarea\n              className=\"form-control mb-3\"\n              rows={3}\n              value={form.amenities.join(\", \")}\n              placeholder=\"Kitchen, Wifi\"\n              onChange={(e) =>\n                setForm((f) => ({\n                  ...f,\n                  amenities: e.target.value\n                    .split(\",\")\n                    .map((s) => s.trim())\n                    .filter(Boolean),\n                }))\n              }\n            />\n\n            <label className=\"form-label\">Location</label>\n            <div className=\"row\">\n              <div className=\"col\">\n                <input\n                  className=\"form-control mb-2\"\n                  placeholder=\"City\"\n                  value={form.location.city}\n                  onChange={(e) =>\n                    setForm((f) => ({ ...f, location: { ...f.location, city: e.target.value } }))\n                  }\n                />\n              </div>\n              <div className=\"col\">\n                <input\n                  className=\"form-control mb-2\"\n                  placeholder=\"State (abbr.)\"\n                  value={form.location.state}\n                  onChange={(e) =>\n                    setForm((f) => ({\n                      ...f,\n                      location: {\n                        ...f.location,\n                        state: e.target.value.toUpperCase().slice(0, 2),\n                      },\n                    }))\n                  }\n                />\n              </div>\n            </div>\n            <select\n              className=\"form-select\"\n              value={form.location.country}\n              onChange={(e) =>\n                setForm((f) => ({ ...f, location: { ...f.location, country: e.target.value } }))\n              }\n            >\n              {[\"United States\", \"Canada\", \"United Kingdom\", \"Australia\", \"Taiwan\", \"Japan\"].map(\n                (c) => (\n                  <option key={c}>{c}</option>\n                )\n              )}\n            </select>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default PropertyForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}